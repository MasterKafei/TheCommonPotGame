{% extends '@Layout/Page/Default/base.html.twig' %}

{% block body %}
    <a href="{{ path('app_game_create') }}">Cr√©er une partie</a>
    <table class="table table-striped table-dark">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Action</th>
        </tr>
        </thead>
        <tbody>
        {% for game in games %}
        <tr>
            <th scope="row">{{ loop.index }}</th>
            <td>{{ game.name }}</td>
            <td>
                {% if game_bussiness.userInGame(game, app.user) or game.rounds|length > 2 %}
                    <a href="{{ path('app_game_show', {'name': game.name}) }}" class="btn btn-primary">Afficher</a>
                {% else %}
                    <a href="{{ path('app_game_join', {'name': game.name}) }}" class="btn btn-success">Rejoindre</a>
                {% endif %}
                {% if game_bussiness.isUserAllowToDeleteGame(game, app.user) %}
                    <a href="{{ path('app_game_delete', {'name': game.name}) }}" class="btn btn-danger">Supprimer</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock body %}